<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <!-- <link rel="icon" href="/favicon.ico" type="image/x-icon"> -->
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>lsof command - Fung's wiki</title>
    <!-- <meta name="keywords" content=""/> -->
    <!-- <meta name="description" content=""/> -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/">Fung's wiki</a>
    &nbsp;&#187;&nbsp;
    <a href="/#linux">linux</a>
    &nbsp;&#187;&nbsp;lsof command
    <span class="updated">Last Update: &nbsp;
    2018-01-16 14:30:01
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <p>lsof:<br />
   list opening file descriptor</p>
<h2 id="default-lsof-output">Default lsof output</h2>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>COMMAND</td>
<td>The first nine characters of the name of the command in the process</td>
</tr>
<tr>
<td>PID</td>
<td>The process id of the process</td>
</tr>
<tr>
<td>USER</td>
<td>The login name of the user who owns the process</td>
</tr>
<tr>
<td>FD</td>
<td>The file descriptor number and the access type, r for read, w for write, u for read/write</td>
</tr>
<tr>
<td>TYPE</td>
<td>The type of file, CHR for character, BLK for block, DIR for directory, REG for regular file</td>
</tr>
<tr>
<td>DEVICE</td>
<td>The device number of the device, major and the minor</td>
</tr>
<tr>
<td>SIZE</td>
<td>If available, the file size</td>
</tr>
<tr>
<td>NODE</td>
<td>The node number of the local file</td>
</tr>
<tr>
<td>NAME</td>
<td>The name of file</td>
</tr>
</tbody>
</table>
<h2 id="lsof-essential-options">lsof essential options</h2>
<div class="hlcode"><pre><span class="na">-a</span><span class="p">:</span>   <span class="nb">list</span> 
<span class="na">-c</span><span class="o">&lt;</span><span class="nb">command</span><span class="o">&gt;</span><span class="p">:</span>  <span class="nb">list</span> <span class="nx">the</span> <span class="nx">opening</span> <span class="nx">files</span> <span class="k">by</span> <span class="nx">the</span> <span class="nb">specified</span> <span class="nb">command</span>
<span class="na">-g</span><span class="p">:</span>   <span class="nb">list</span> <span class="nx">the</span> <span class="nx">details</span> <span class="nx">of</span> <span class="nx">gid</span> <span class="nb">process</span>
<span class="na">-d</span><span class="o">&lt;</span><span class="nx">file_number</span><span class="o">&gt;</span><span class="p">:</span>     <span class="nb">list</span> <span class="nx">the</span> <span class="nb">process</span> <span class="nx">who</span> <span class="nx">owns</span> <span class="nx">the</span> <span class="nb">specified</span> <span class="nb">file</span>
<span class="o">+</span><span class="nb">d</span><span class="p">:</span>   <span class="nb">list</span> <span class="nx">the</span> <span class="nx">opening</span> <span class="nb">file</span> <span class="nx">under</span> <span class="nx">the</span> <span class="nb">specified</span> <span class="nx">directory</span>
<span class="o">+</span><span class="nb">D</span><span class="p">:</span>   <span class="nx">recursive</span> <span class="nb">option</span> <span class="nb">for</span> <span class="o">+</span><span class="nb">d</span>
<span class="na">-p</span><span class="p">:</span>   <span class="nb">list</span> <span class="nx">the</span> <span class="nx">opening</span> <span class="nb">file</span> <span class="k">by</span> <span class="nb">specified</span> <span class="nb">process</span>
<span class="na">-u</span><span class="p">:</span>   <span class="nb">list</span> <span class="nx">the</span> <span class="nx">detail</span> <span class="nb">process</span> <span class="nx">of</span> <span class="nx">uid</span>
</pre></div>


<h2 id="examples">examples</h2>
<h3 id="list-all-the-opening-files-under-the-worktmp">list all the opening files under the /worktmp</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">lsof</span> <span class="o">+</span><span class="n">D</span> <span class="o">/</span><span class="n">worktmp</span><span class="o">/</span>
<span class="n">COMMAND</span>   <span class="n">PID</span>     <span class="n">USER</span>   <span class="n">FD</span>   <span class="n">TYPE</span> <span class="n">DEVICE</span> <span class="n">SIZE</span><span class="o">/</span><span class="n">OFF</span>    <span class="n">NODE</span> <span class="n">NAME</span>
<span class="n">bash</span>     <span class="mi">5029</span> <span class="n">kingsley</span>  <span class="n">cwd</span>    <span class="kt">DIR</span>  <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">4096</span> <span class="mi">3409241</span> <span class="o">/</span><span class="n">worktmp</span><span class="o">/</span><span class="n">note</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">practice</span>
<span class="n">bash</span>    <span class="mi">16358</span> <span class="n">kingsley</span>  <span class="n">cwd</span>    <span class="kt">DIR</span>  <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">4096</span> <span class="mi">2105360</span> <span class="o">/</span><span class="n">worktmp</span><span class="o">/</span><span class="n">note</span><span class="o">/</span><span class="n">shellscript</span>
<span class="n">vimx</span>    <span class="mi">16487</span> <span class="n">kingsley</span>  <span class="n">cwd</span>    <span class="kt">DIR</span>  <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">4096</span> <span class="mi">2105360</span> <span class="o">/</span><span class="n">worktmp</span><span class="o">/</span><span class="n">note</span><span class="o">/</span><span class="n">shellscript</span>
</pre></div>


<h3 id="list-the-opening-file-of-the-given-process">list the opening file of the given process</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">lsof</span> <span class="o">-</span><span class="n">p</span> <span class="mi">29396</span>
<span class="n">COMMAND</span>   <span class="n">PID</span>     <span class="n">USER</span>   <span class="n">FD</span>   <span class="n">TYPE</span>             <span class="n">DEVICE</span> <span class="n">SIZE</span><span class="o">/</span><span class="n">OFF</span>    <span class="n">NODE</span> <span class="n">NAME</span>
<span class="n">tmux</span>    <span class="mi">29396</span> <span class="n">kingsley</span>  <span class="n">cwd</span>    <span class="kt">DIR</span>              <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">4096</span> <span class="mi">3409241</span> <span class="o">/</span><span class="n">worktmp</span><span class="o">/</span><span class="n">note</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">practice</span>
</pre></div>


<h3 id="list-the-openingfile-of-the-given-user">list the openingfile of the given user</h3>
<div class="hlcode"><pre> <span class="n">lsof</span> <span class="o">-</span><span class="n">u</span> <span class="n">kingsley</span><span class="o">|</span><span class="n">tail</span> <span class="o">-</span><span class="mi">5</span>
 <span class="n">bash</span>      <span class="mi">29399</span> <span class="n">kingsley</span>  <span class="n">mem</span>       <span class="n">REG</span>              <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">26060</span>     <span class="mi">135506</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">gconv</span><span class="o">/</span><span class="n">gconv</span><span class="o">-</span><span class="n">modules</span><span class="p">.</span><span class="n">cache</span>
 <span class="n">bash</span>      <span class="mi">29399</span> <span class="n">kingsley</span>  <span class="mi">255u</span>      <span class="n">CHR</span>              <span class="mi">136</span><span class="p">,</span><span class="mi">1</span>       <span class="mi">0</span><span class="n">t0</span>          <span class="mi">4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">pts</span><span class="o">/</span><span class="mi">1</span>
</pre></div>


<h3 id="list-only-process-of-the-given-user">list only process of the given user</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">lsof</span> <span class="o">-</span><span class="n">t</span> <span class="o">-</span><span class="n">u</span> <span class="n">kingsley</span><span class="o">|</span><span class="n">tail</span> <span class="o">-</span><span class="mi">5</span>
<span class="mi">24266</span>
<span class="mi">29307</span>
<span class="mi">29396</span>
<span class="mi">29398</span>
<span class="mi">29399</span>
</pre></div>


<p><strong><em>if you want to kill someone's opening files</em></strong></p>
<div class="hlcode"><pre><span class="n">kill</span> <span class="o">-</span><span class="mi">9</span> <span class="err">`</span><span class="n">lsof</span> <span class="o">-</span><span class="n">t</span> <span class="o">-</span><span class="n">u</span> <span class="n">usernmae</span><span class="err">`</span>
</pre></div>


<h3 id="list-all-of-the-tcp-udp-connections">list all of the tcp, udp connections:</h3>
<div class="hlcode"><pre><span class="n">lsof</span> <span class="o">-</span><span class="n">i</span> <span class="n">tcp</span>
<span class="n">lsof</span> <span class="o">-</span><span class="n">i</span> <span class="n">udp</span>
<span class="n">lsof</span> <span class="o">-</span><span class="n">i</span><span class="o">:</span><span class="mi">22</span>
</pre></div>


<h3 id="find-the-process-of-the-specified-nic">find the process of the specified NIC</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">lsof</span> <span class="o">-</span><span class="n">i</span><span class="err">@</span><span class="mf">9.83.19.119</span>
<span class="n">COMMAND</span>   <span class="n">PID</span>     <span class="n">USER</span>   <span class="n">FD</span>   <span class="n">TYPE</span> <span class="n">DEVICE</span> <span class="n">SIZE</span><span class="o">/</span><span class="n">OFF</span> <span class="n">NODE</span> <span class="n">NAME</span>
<span class="n">sametime</span> <span class="mi">5461</span> <span class="n">kingsley</span>  <span class="mi">326u</span>  <span class="n">IPv4</span> <span class="mi">310317</span>      <span class="mi">0</span><span class="n">t0</span>  <span class="n">TCP</span> <span class="mf">9.83.19.119</span><span class="o">:</span><span class="mi">36909</span><span class="o">-&gt;</span><span class="n">d03im403</span><span class="p">.</span><span class="n">boulder</span><span class="p">.</span><span class="n">ibm</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="n">virtual</span><span class="o">-</span><span class="n">places</span> <span class="p">(</span><span class="n">ESTABLISHED</span><span class="p">)</span>
<span class="n">lnotes</span>   <span class="mi">5709</span> <span class="n">kingsley</span>   <span class="mi">48u</span>  <span class="n">IPv4</span> <span class="mi">284523</span>      <span class="mi">0</span><span class="n">t0</span>  <span class="n">TCP</span> <span class="mf">9.83.19.119</span><span class="o">:</span><span class="mi">43825</span><span class="o">-&gt;</span><span class="n">aa</span><span class="mf">.04.2</span><span class="n">da9</span><span class="p">.</span><span class="n">ip4</span><span class="p">.</span><span class="k">static</span><span class="p">.</span><span class="n">sl</span><span class="o">-</span><span class="n">reverse</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="n">lotusnote</span> <span class="p">(</span><span class="n">CLOSE_WAIT</span><span class="p">)</span>
<span class="n">firefox</span>  <span class="mi">8187</span> <span class="n">kingsley</span>   <span class="mi">45u</span>  <span class="n">IPv4</span> <span class="mi">884148</span>      <span class="mi">0</span><span class="n">t0</span>  <span class="n">TCP</span> <span class="mf">9.83.19.119</span><span class="o">:</span><span class="mi">37990</span><span class="o">-&gt;</span><span class="n">sgce02</span><span class="p">.</span><span class="n">sg</span><span class="p">.</span><span class="n">ibm</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="n">http</span> <span class="p">(</span><span class="n">ESTABLISHED</span><span class="p">)</span>
<span class="n">firefox</span>  <span class="mi">8187</span> <span class="n">kingsley</span>   <span class="mi">54u</span>  <span class="n">IPv4</span> <span class="mi">892001</span>      <span class="mi">0</span><span class="n">t0</span>  <span class="n">TCP</span> <span class="mf">9.83.19.119</span><span class="o">:</span><span class="mi">38017</span><span class="o">-&gt;</span><span class="n">sgce02</span><span class="p">.</span><span class="n">sg</span><span class="p">.</span><span class="n">ibm</span><span class="p">.</span><span class="n">com</span><span class="o">:</span><span class="n">http</span> <span class="p">(</span><span class="n">ESTABLISHED</span><span class="p">)</span>
</pre></div>


<h3 id="find-the-opening-file-by-specified-application">find the opening file by specified application</h3>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">lsof</span> <span class="o">-</span><span class="n">c</span> <span class="n">firefox</span>
<span class="n">COMMAND</span>  <span class="n">PID</span>     <span class="n">USER</span>   <span class="n">FD</span>   <span class="n">TYPE</span>             <span class="n">DEVICE</span> <span class="n">SIZE</span><span class="o">/</span><span class="n">OFF</span>    <span class="n">NODE</span> <span class="n">NAME</span>
<span class="n">firefox</span> <span class="mi">8187</span> <span class="n">kingsley</span>  <span class="n">cwd</span>    <span class="kt">DIR</span>              <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">4096</span> <span class="mi">1048688</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">kingsley</span>
<span class="n">firefox</span> <span class="mi">8187</span> <span class="n">kingsley</span>  <span class="n">rtd</span>    <span class="kt">DIR</span>              <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>     <span class="mi">4096</span>       <span class="mi">2</span> <span class="o">/</span>
<span class="n">firefox</span> <span class="mi">8187</span> <span class="n">kingsley</span>  <span class="n">txt</span>    <span class="n">REG</span>              <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>   <span class="mi">129032</span>  <span class="mi">524462</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">firefox</span><span class="o">/</span><span class="n">firefox</span>
<span class="n">firefox</span> <span class="mi">8187</span> <span class="n">kingsley</span>  <span class="n">mem</span>    <span class="n">REG</span>              <span class="mi">253</span><span class="p">,</span><span class="mi">1</span>   <span class="mi">177520</span>  <span class="mi">541673</span> <span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">libk5crypto</span><span class="p">.</span><span class="n">so</span><span class="mf">.3.1</span>
</pre></div>


<h3 id="disk-space-warning">disk space warning</h3>
<div class="hlcode"><pre><span class="n">lsof</span><span class="o">|</span><span class="n">grep</span> <span class="o">-</span><span class="n">i</span> <span class="n">delete</span>
</pre></div>
  
</div>
    </div>
    <div id="footer">
      <!-- <div class="footer-left"> -->
      <!-- <div class="footer-center"> -->
        <center>
        <p>
        Copyright © 2012-2018 Fung Kong.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://github.com/tankywoo/yasimple_x2" target="_blank">YASimple_X2</a>.
        </p>
        </center>
      <!-- </div> [> end footer-left <] -->
      <!-- <div class="footer-right"> -->
        <!-- <p>站点最后生成 2018-01-31 17:22:28</p> -->
      <!-- </div> [> end footer-right <] -->
    </div>

    
    

  </body>
</html>