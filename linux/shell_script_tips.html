<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <!-- <link rel="icon" href="/favicon.ico" type="image/x-icon"> -->
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Shell script tips - Fung's wiki</title>
    <!-- <meta name="keywords" content=""/> -->
    <!-- <meta name="description" content=""/> -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/">Fung's wiki</a>
    &nbsp;&#187;&nbsp;
    <a href="/#linux">linux</a>
    &nbsp;&#187;&nbsp;Shell script tips
    <span class="updated">Last Update: &nbsp;
    2018-01-16 14:56:52
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#shellif">Shell中if判断条件</a></li>
<li><a href="#1-regex">1. Regex</a></li>
<li><a href="#2-grep-command-parameters">2. grep command parameters</a></li>
<li><a href="#3-cut-command">3 cut command</a></li>
<li><a href="#4-sed-command">4 sed command</a></li>
<li><a href="#5-awk-command">5 awk command</a><ul>
<li><a href="#awk-nr-5-first-four-lines">awk 'NR &lt; 5' # first four lines</a></li>
</ul>
</li>
<li><a href="#6-summary">6 summary</a></li>
<li><a href="#delete-duplicate-lines">Delete duplicate lines</a></li>
<li><a href="#replace-tab-to-other">Replace tab to other</a><ul>
<li><a href="#finding-dotfile">Finding dotfile</a></li>
<li><a href="#bash-cut-usages">bash cut usages</a><ul>
<li><a href="#select-column-of-characters">select column of characters</a></li>
<li><a href="#select-column-of-characters-using-range">select column of characters using Range</a></li>
<li><a href="#select-a-specific-field-from-a-file">select a specific field from a file</a></li>
<li><a href="#select-multiple-fields-from-a-file">select multiple fields from a file</a></li>
<li><a href="#select-fields-only-when-a-line-contains-the-delimiter">Select Fields Only When a Line Contains the Delimiter</a></li>
<li><a href="#select-all-fields-except-the-specified-field">select all fields except the specified field</a></li>
<li><a href="#change-output-delimiter-for-display">change output delimiter for display</a></li>
</ul>
</li>
<li><a href="#remove-the-m-character-from-linuxunix">Remove the ^M character from Linux/UNIX</a><ul>
<li><a href="#linux-platform">Linux Platform</a></li>
<li><a href="#unix">Unix</a></li>
<li><a href="#the-ksh-script-to-remove-the-m-on-aix">the ksh script to remove the ^M on AIX</a></li>
</ul>
</li>
<li><a href="#meaning-of-ps1-ps2-ps3-and-ps4">Meaning of PS1, PS2, PS3 and PS4</a><ul>
<li><a href="#ps1-the-default-command-line-prompt">PS1 -- The default command line prompt</a></li>
<li><a href="#ps2-continuation-interactive-prompt">PS2 -- Continuation interactive prompt</a></li>
<li><a href="#ps3-prompt-used-by-select-inside-the-shell-script">PS3 --  prompt used by "select" inside the shell script</a></li>
<li><a href="#ps4-used-by-set-x-to-prefix-tracing-output">PS4 --   Used by "set -x " to prefix tracing output</a></li>
<li><a href="#prompt_command">PROMPT_COMMAND</a></li>
</ul>
</li>
<li><a href="#special-dolar-in-linux">special dolar($) in linux</a><ul>
<li><a href="#the-difference-between-and">The difference between $@ and $*</a></li>
<li><a href="#set-command-in-shell-script">set command in shell script</a></li>
</ul>
</li>
<li><a href="#how-to-check-for-null-value">How to check for null value</a></li>
<li><a href="#testing-standard-error-messages-stderr">testing standard error messages STDERR</a></li>
<li><a href="#remote-display-setting-on-linux-client-and-servervnc">Remote display setting on Linux Client and Server(VNC)</a></li>
<li><a href="#investigating-high-cpu-on-linux">Investigating high CPU on Linux</a></li>
</ul>
</li>
</ul>
</div>
<p>Shell中特殊符号的含义：</p>
<ul>
<li>';'  分号（Command separator）</li>
</ul>
<p>表示连续命令，如 <code>cd /backup ; mkdir -p test</code></p>
<ul>
<li>'strings'  单引号（single quote）<br />
引号内为单一字符串，引号内的字符串禁止任何变量替换，如：</li>
</ul>
<div class="hlcode"><pre><span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">Desktop</span><span class="p">]</span><span class="err">$</span> <span class="n">export</span> <span class="n">IDS</span><span class="o">=</span><span class="n">ykings</span>
<span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">Desktop</span><span class="p">]</span><span class="err">$</span> <span class="n">echo</span> <span class="err">&#39;$</span><span class="n">IDS</span><span class="err">&#39;</span>
<span class="err">$</span><span class="n">IDS</span>
<span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">Desktop</span><span class="p">]</span><span class="err">$</span> <span class="n">echo</span> <span class="s">&quot;$IDS&quot;</span>
<span class="n">ykings</span>
</pre></div>


<ul>
<li>
<p>"strings"   双引号（double quote）<br />
类似单引号，但双引号允许变量扩展，只是禁止了通配符</p>
</li>
<li>
<p>:  冒号（colon）<br />
内建指令，表示什么都不做，如 <code>:&gt;file</code> 等价与<code>cat /dev/null &gt; file</code></p>
</li>
<li>
<p>${} 变量的正则表达式</p>
</li>
</ul>
<div class="hlcode"><pre>[kingsley@oc7421025535 practice]$ TIME=`date +%Y%m%d`
[kingsley@oc7421025535 practice]$ echo <span class="cp">${</span><span class="n">TIME</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="cp">}</span>
2015
[kingsley@oc7421025535 practice]$ echo <span class="nv">$TIME</span>
20151113
[kingsley@oc7421025535 practice]$ echo <span class="cp">${</span><span class="n">TIME</span><span class="o">/</span><span class="mi">2015</span><span class="o">/</span><span class="mi">2016</span><span class="cp">}</span>
20161113
</pre></div>


<ul>
<li>
<p>$n 执行脚本时候后面接的变量，如$0表示脚本本身，$1表示第一个变量，如果变量超过两位数，则需要用${10}</p>
</li>
<li>
<p>$@ 跟$<em>类似，两者的区别在于，符号 $</em> 将所有的引用变量视为一个整体。但符号 $@ 则仍旧保留每个引用变量的区段观念。</p>
</li>
<li>
<p>$# 传递给脚本的参数个数</p>
</li>
<li>
<p>$* 传递给脚本的所有参数</p>
</li>
<li>
<p>$? 脚本返回结果，0为成功，1为失败</p>
</li>
</ul>
<div class="hlcode"><pre><span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">$</span> <span class="n">cat</span> <span class="n">t</span><span class="p">.</span><span class="n">ksh</span>
<span class="cp">#!/bin/ksh</span>
<span class="k">if</span> <span class="p">[[</span> <span class="err">$#</span> <span class="o">-</span><span class="n">ne</span> <span class="mi">2</span> <span class="p">]];</span> <span class="n">then</span>
<span class="n">echo</span> <span class="s">&quot;please use t.ksh \$1 \$2&quot;</span>
<span class="n">exit</span> <span class="mi">1</span>
<span class="k">else</span>
<span class="n">expr</span> <span class="err">$</span><span class="mi">1</span> <span class="o">+</span> <span class="err">$</span><span class="mi">2</span>
    <span class="n">echo</span> <span class="s">&quot;File Name: $0&quot;</span>
    <span class="n">echo</span> <span class="s">&quot;First Parameter : $1&quot;</span>
    <span class="n">echo</span> <span class="s">&quot;First Parameter : $2&quot;</span>
    <span class="n">echo</span> <span class="s">&quot;Quoted Values: $@&quot;</span>
    <span class="n">echo</span> <span class="s">&quot;Quoted Values: $*&quot;</span>
    <span class="n">echo</span> <span class="s">&quot;Total Number of Parameters : $#&quot;</span>
<span class="n">fi</span>
<span class="n">exit</span> <span class="mi">0</span>
</pre></div>


<h1 id="shellif">Shell中if判断条件</h1>
<p>if有两种判断，一种是接command，一种是接expression， 如果接command， 且返回值为0， 表示命令执行成功，则会执行then后面的语句，否则执行else或者跳出if语句</p>
<p>=========字符串比较=========================<br />
1. -z string   如果字符串长度为0，则为真</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">$</span> <span class="n">cat</span> <span class="k">if</span><span class="p">.</span><span class="n">ksh</span>
<span class="cp">#!/bin/ksh</span>
<span class="n">echo</span> <span class="s">&quot;Please enter a parameter:&quot;</span>
<span class="n">read</span> <span class="n">PARA</span>
<span class="k">if</span> <span class="p">[</span> <span class="o">-</span><span class="n">z</span> <span class="err">$</span><span class="n">PARA</span> <span class="p">];</span> <span class="n">then</span>
   <span class="n">echo</span> <span class="s">&quot;Parameter is null&quot;</span>
<span class="k">else</span>
   <span class="n">echo</span> <span class="s">&quot;First Parameter is: $PARA&quot;</span>
<span class="n">fi</span>
<span class="n">exit</span> <span class="mi">0</span>
<span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="k">if</span><span class="p">.</span><span class="n">ksh</span>
<span class="n">Please</span> <span class="n">enter</span> <span class="n">a</span> <span class="n">parameter</span><span class="o">:</span>
<span class="n">abc</span>
<span class="n">First</span> <span class="n">Parameter</span> <span class="n">is</span><span class="o">:</span> <span class="n">abc</span>
<span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">$</span> <span class="p">.</span><span class="o">/</span><span class="k">if</span><span class="p">.</span><span class="n">ksh</span>
<span class="n">Please</span> <span class="n">enter</span> <span class="n">a</span> <span class="n">parameter</span><span class="o">:</span>

<span class="n">Parameter</span> <span class="n">is</span> <span class="n">null</span>
</pre></div>


<ol>
<li>-n strings  如果字符串长度为非0，则为真</li>
</ol>
<p>=================算数比较===================</p>
<div class="hlcode"><pre><span class="mf">1.</span> <span class="o">-</span><span class="n">eq</span> <span class="err">等于</span>
<span class="mf">2.</span> <span class="o">-</span><span class="n">ne</span> <span class="err">不等于</span>
<span class="mf">3.</span> <span class="o">-</span><span class="n">lt</span> <span class="err">小于</span>
<span class="mf">4.</span> <span class="o">-</span><span class="n">le</span> <span class="err">小于等于</span>
<span class="mf">5.</span> <span class="o">-</span><span class="n">ge</span> <span class="err">大于等于</span>
<span class="mf">6.</span> <span class="o">-</span><span class="n">gt</span> <span class="err">大于</span>
</pre></div>


<p>==================文件及目录判断=================</p>
<div class="hlcode"><pre><span class="mf">1.</span> <span class="o">-</span><span class="n">e</span> <span class="n">filename</span> <span class="err">文件存在为真</span>
<span class="mf">2.</span> <span class="o">-</span><span class="n">d</span> <span class="n">dirname</span>  <span class="err">如果是目录，则为真</span>
<span class="mf">3.</span> <span class="o">-</span><span class="n">f</span> <span class="n">filename</span> <span class="err">如果为常规文件，则为真</span>
<span class="mf">4.</span> <span class="o">-</span><span class="n">L</span> <span class="n">filename</span> <span class="err">如果为</span><span class="n">symbolic</span> <span class="n">link</span><span class="err">，则为真</span>
<span class="mf">5.</span> <span class="o">-</span><span class="n">r</span> <span class="n">filename</span> <span class="err">如果文件可读，则为真</span>
<span class="mf">6.</span> <span class="o">-</span><span class="n">w</span> <span class="n">filename</span> <span class="err">如果文件可写，则为真</span>
<span class="mf">7.</span> <span class="o">-</span><span class="n">x</span> <span class="n">filename</span> <span class="err">如果文件可执行，则为真</span>
<span class="mf">8.</span> <span class="n">f1</span> <span class="o">-</span><span class="n">nt</span> <span class="n">f2</span>   <span class="err">如果</span><span class="n">f1</span><span class="err">比</span><span class="n">f2</span><span class="err">新，则为真</span>
<span class="mf">9.</span> <span class="n">f1</span> <span class="o">-</span><span class="n">ot</span> <span class="n">f2</span>   <span class="err">如果</span><span class="n">f1</span><span class="err">比</span><span class="n">f2</span><span class="err">旧，则为真</span>

<span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">Jason_db2level_scan</span><span class="p">]</span><span class="err">$</span> <span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;1</span><span class="se">\n</span><span class="s">2</span><span class="se">\n</span><span class="s">3&quot;</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="p">[</span><span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">Jason_db2level_scan</span><span class="p">]</span><span class="err">$</span> <span class="n">echo</span>  <span class="s">&quot;1</span><span class="se">\n</span><span class="s">2</span><span class="se">\n</span><span class="s">3&quot;</span>
<span class="mi">1</span><span class="err">\</span><span class="n">n2</span><span class="err">\</span><span class="n">n3</span>
</pre></div>


<p>==================Print color output in screen===================<br />
Colors are represented by color codes, some examples being, reset = 0, black = 30, red = 31,green = 32, yellow = 33, blue = 34, magenta = 35, cyan = 36, and white = 37.</p>
<div class="hlcode"><pre><span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;\e[1;31m This is red text \e[0m&quot;</span>
</pre></div>


<p>Here, \e[1;31m is the escape string that sets the color to red and \e[0m resets the color back. Replace 31 with the required color code.</p>
<p>For a colored background, reset = 0, black = 40, red = 41, green = 42, yellow = 43, blue = 44, magenta = 45, cyan = 46, and white=47, are the color codes that are commonly used.<br />
To print a colored background, enter the following command:</p>
<div class="hlcode"><pre><span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;\e[1;42m Green Background \e[0m&quot;</span>
</pre></div>


<p>===================================<br />
===      Finding length of strings==<br />
===================================</p>
<div class="hlcode"><pre>[root@oc7421025535:/worktmp/note/scripts/practice]# export IDS=yking
[root@oc7421025535:/worktmp/note/scripts/practice]# length=<span class="cp">${</span><span class="c">#IDS</span><span class="cp">}</span>
[root@oc7421025535:/worktmp/note/scripts/practice]# echo <span class="nv">$length</span>
5
</pre></div>


<p>===========================================<br />
===   Checking for root user        =======<br />
===========================================</p>
<table class="hlcodetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="hlcode"><pre><span class="c">#!/bin/sh</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$UID</span> -ne 0 <span class="o">]</span>; <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Non root user, please run as root.&quot;</span>
<span class="k">else</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;ROOT user.&quot;</span>
<span class="k">fi</span>
<span class="nb">exit </span>0
</pre></div>
</td></tr></table>

<p>===========================================<br />
===   Read the parameter from a file    ======<br />
===========================================</p>
<div class="hlcode"><pre><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">#</span> <span class="n">cat</span> <span class="n">out</span><span class="p">.</span><span class="n">txt</span>
<span class="n">file</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">#</span> <span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">print</span> <span class="o">|</span> <span class="n">xargs</span> <span class="err">$</span><span class="p">(</span><span class="n">cat</span> <span class="n">out</span><span class="p">.</span><span class="n">txt</span> <span class="p">)</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">oc7421025535</span> <span class="n">practice</span><span class="p">]</span><span class="err">#</span> <span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">print</span> <span class="o">|</span> <span class="n">xargs</span> <span class="err">`</span><span class="n">awk</span> <span class="p">{</span><span class="err">&#39;</span><span class="n">print</span> <span class="err">$</span><span class="mi">0</span><span class="err">&#39;</span><span class="p">}</span> <span class="n">out</span><span class="p">.</span><span class="n">txt</span><span class="err">`</span>
<span class="n">var</span><span class="o">=</span> <span class="err">$</span><span class="p">(</span> <span class="n">cat</span> <span class="n">file</span> <span class="p">)</span>
</pre></div>


<p>===========================================<br />
===   Regular Expression            =======<br />
===========================================</p>
<h1 id="1-regex">1. Regex</h1>
<div class="hlcode"><pre><span class="o">^</span>  <span class="err">行首定位符</span>  <span class="o">/^</span><span class="n">love</span><span class="o">/</span>  <span class="err">匹配所有以</span><span class="n">love</span><span class="err">开头的行</span>
<span class="err">$</span>  <span class="err">行尾定位符</span>  <span class="o">/</span><span class="n">love</span><span class="err">$</span><span class="o">/</span>  <span class="err">匹配所有以</span><span class="n">love</span><span class="err">结尾的行</span>
<span class="p">.</span>  <span class="err">匹配单个字符</span>   <span class="o">/</span><span class="n">l</span><span class="p">..</span><span class="n">e</span><span class="o">/</span>   <span class="err">匹配包含一个</span><span class="n">l</span><span class="err">，后面跟两个字符，再跟一个</span><span class="n">e</span><span class="err">的行</span>
<span class="o">*</span>  <span class="err">匹配</span><span class="mi">0</span><span class="err">或者多个重复的位于</span><span class="o">*</span><span class="err">前的字符</span>    <span class="o">/</span> <span class="o">*</span><span class="n">love</span><span class="o">/</span>    <span class="err">匹配包含跟在</span><span class="mi">0</span><span class="err">个或者多个字符后的</span><span class="n">love</span><span class="err">的行</span>
<span class="p">[]</span>    <span class="err">匹配一组字符中的任意一个</span>   <span class="o">/</span><span class="p">[</span><span class="n">Ll</span><span class="p">]</span><span class="n">ove</span><span class="o">/</span>   <span class="err">匹配</span><span class="n">Love</span><span class="err">或者</span><span class="n">love</span>
<span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="n">y</span><span class="p">]</span>    <span class="err">匹配指定范围内的一个字符</span>   <span class="o">/</span><span class="p">[</span><span class="n">A</span><span class="o">-</span><span class="n">Z</span><span class="p">]</span><span class="n">ove</span><span class="o">/</span>  <span class="err">匹配后面跟着</span><span class="n">ove</span><span class="err">的一个</span><span class="n">A</span><span class="err">至</span><span class="n">Z</span><span class="err">的任意字符</span>
<span class="p">[</span><span class="o">^</span><span class="p">]</span>   <span class="err">匹配不在指定组内的字符</span>  <span class="o">/</span><span class="p">[</span><span class="o">^</span><span class="n">A</span><span class="o">-</span><span class="n">Z</span><span class="p">]</span><span class="o">/</span>    <span class="err">匹配不在范围</span><span class="n">A</span><span class="err">至</span><span class="n">Z</span><span class="err">之间的任意一个字符</span>
<span class="err">\</span>  <span class="err">转义字符</span>    <span class="o">/</span><span class="n">love</span><span class="err">\</span><span class="p">.</span><span class="o">/</span>    <span class="err">匹配包含</span><span class="n">love</span><span class="err">，后面跟一个句号</span>
</pre></div>


<h1 id="2-grep-command-parameters">2. grep command parameters</h1>
<div class="hlcode"><pre><span class="o">-</span><span class="n">E</span> <span class="err">扩展</span><span class="n">grep</span><span class="err">，等同于</span><span class="n">egrep</span>         <span class="err">如</span><span class="o">:</span> <span class="n">grep</span> <span class="o">-</span><span class="n">E</span> <span class="s">&quot;[a-z]+&quot;</span> <span class="n">filename</span><span class="err">等价于</span><span class="n">egrep</span> <span class="s">&quot;[a-z]+&quot;</span> <span class="n">filename</span>
<span class="o">-</span><span class="n">o</span> <span class="err">不输出整行，只输出匹配字符串</span>     <span class="n">echo</span> <span class="s">&quot;Hello world&quot;</span><span class="o">|</span><span class="n">grep</span> <span class="o">-</span><span class="n">o</span> <span class="n">world</span><span class="p">,</span><span class="err">只输出</span><span class="n">world</span>
<span class="o">-</span><span class="n">c</span> <span class="err">匹配行出现的次数，而不是字符串出现的次数</span>  <span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;this is a word word&quot;</span> <span class="o">|</span><span class="n">grep</span> <span class="o">-</span><span class="n">c</span> <span class="n">word</span><span class="err">结果为</span><span class="mi">1</span><span class="err">，而不是</span><span class="mi">2</span>
<span class="o">-</span><span class="n">n</span> <span class="err">打印匹配行的行号</span>
<span class="o">-</span><span class="n">Rn</span>   <span class="err">递归查找匹配行</span>          <span class="n">grep</span> <span class="o">-</span><span class="n">Rn</span> <span class="p">.</span><span class="o">/</span> <span class="s">&quot;text&quot;</span>
<span class="o">-</span><span class="n">e</span> <span class="err">匹配多个匹配项</span>          <span class="err">如果想匹配多个条件，可使用</span><span class="o">-</span><span class="n">e</span><span class="err">参数</span><span class="o">:</span><span class="n">grep</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;p1&quot;</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;p2&quot;</span>
<span class="o">-</span><span class="n">A</span><span class="o">/-</span><span class="n">B</span> <span class="err">打印匹配行的前后记录</span>       <span class="n">grep</span> <span class="s">&quot;text&quot;</span> <span class="o">-</span><span class="n">A</span> <span class="mi">5</span> <span class="o">-</span><span class="n">B</span> <span class="mi">10</span><span class="err">表示显示前十行和后五行</span>
</pre></div>


<h1 id="3-cut-command">3 cut command</h1>
<div class="hlcode"><pre><span class="o">-</span><span class="n">fn</span>      <span class="n">n</span><span class="err">为数字，打印第</span><span class="n">n</span><span class="err">列。</span> <span class="n">cut</span> <span class="o">-</span><span class="n">f1</span><span class="err">打印第一列；</span><span class="n">cut</span> <span class="o">-</span><span class="n">f</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="err">打印</span><span class="mi">2</span><span class="err">，</span><span class="mi">3</span><span class="err">列</span>
<span class="o">-</span><span class="n">fn</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;;&quot;</span>   <span class="err">指定分割符，这里为</span><span class="s">&quot;;&quot;</span>
<span class="o">-</span><span class="n">c</span>    <span class="err">打印匹配字符串，</span><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="mi">5</span> <span class="err">打印前五个字符</span>
</pre></div>


<h1 id="4-sed-command">4 sed command</h1>
<div class="hlcode"><pre><span class="err">命令</span>                             <span class="err">功能</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">n</span> <span class="err">‘</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="n">p</span> <span class="n">file</span>                 <span class="err">打印</span><span class="mi">10</span><span class="o">~</span><span class="mi">20</span><span class="err">行</span>
<span class="n">sed</span> <span class="err">‘</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="n">s</span><span class="o">/</span><span class="n">AM</span><span class="o">/</span><span class="n">PM</span><span class="o">/</span><span class="n">g</span><span class="err">’</span> <span class="n">file</span>               <span class="err">将</span><span class="mi">1</span><span class="o">~</span><span class="mi">10</span><span class="err">行所有</span><span class="n">AM</span><span class="err">修改为</span><span class="n">PM</span>
<span class="n">sed</span> <span class="err">‘</span><span class="o">/</span><span class="n">March</span><span class="o">/!</span><span class="n">d</span><span class="err">’</span> <span class="n">file</span>                   <span class="err">删除所有不含</span><span class="n">March</span><span class="err">的行</span>
<span class="n">sed</span> <span class="err">‘</span><span class="o">/</span><span class="n">reports</span><span class="o">/</span><span class="n">s</span><span class="o">/</span><span class="mi">5</span><span class="o">/</span><span class="mi">8</span><span class="err">’</span> <span class="n">file</span>              <span class="err">将所有包含</span><span class="n">reports</span><span class="err">的行出现的第一个</span><span class="mi">5</span><span class="err">改为</span><span class="mi">8</span>
<span class="n">sed</span> <span class="err">‘</span><span class="n">s</span><span class="o">/</span><span class="err">…</span><span class="p">.</span><span class="c1">//’ file                      删除每行的前四个字符</span>
<span class="n">sed</span> <span class="err">‘</span><span class="n">s</span><span class="o">/</span><span class="err">…$</span><span class="c1">//’ file                      删除每行的后三个字符</span>
<span class="n">sed</span> <span class="err">‘</span><span class="o">/</span><span class="n">east</span><span class="o">/</span><span class="p">,</span><span class="o">/</span><span class="n">west</span><span class="o">/</span><span class="n">s</span><span class="o">/</span><span class="n">A</span><span class="o">/</span><span class="n">B</span><span class="o">/</span><span class="err">’</span> <span class="n">file</span>            <span class="err">把从</span><span class="n">east</span><span class="err">到</span><span class="n">west</span><span class="err">这个范围内所有行中出现的</span><span class="n">A</span><span class="err">改为</span><span class="n">B</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">n</span> <span class="err">‘</span><span class="o">/</span><span class="n">Time</span><span class="o">/</span><span class="n">w</span> <span class="n">newfile</span><span class="err">’</span> <span class="n">file</span>             <span class="err">将</span><span class="n">file</span><span class="err">中所有包含</span><span class="n">Time</span><span class="err">的行写入到</span><span class="n">newfile</span><span class="err">中</span>
<span class="n">sed</span> <span class="err">‘</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="p">([</span><span class="n">Oo</span><span class="p">]</span><span class="n">ccur</span><span class="err">\</span><span class="p">)</span><span class="n">ence</span><span class="o">/</span><span class="err">\</span><span class="mi">1</span><span class="n">rence</span><span class="o">/</span><span class="err">’</span> <span class="n">file</span>       <span class="err">将所有的</span><span class="n">Occurence</span><span class="err">替换成</span><span class="n">Occurrence</span><span class="err">，将所有的</span><span class="n">occurence</span><span class="err">替换成</span><span class="n">occurrence</span>
<span class="n">sed</span> <span class="err">&#39;</span><span class="o">/^</span><span class="err">$</span><span class="o">/</span><span class="n">d</span><span class="err">&#39;</span> <span class="n">file</span>                    <span class="err">删除空行</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="err">&#39;</span><span class="n">patten</span><span class="o">/</span><span class="n">s</span><span class="o">/</span><span class="n">abc</span><span class="o">/</span><span class="n">xyz</span><span class="o">/</span><span class="n">g</span><span class="err">&#39;</span>   <span class="n">file</span>        <span class="err">直接将所有匹配行的</span><span class="n">abc</span><span class="err">修改为</span><span class="n">xyz</span><span class="err">，直接保存到原文件</span>
<span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="n">this</span><span class="o">/</span><span class="n">THIS</span><span class="o">/</span><span class="mi">3</span><span class="n">g</span><span class="err">&#39;</span>                <span class="err">从第三个匹配项开始替换</span>
<span class="n">echo</span> <span class="n">an</span> <span class="n">example</span> <span class="o">|</span> <span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">w</span><span class="err">\</span><span class="o">+/</span><span class="p">[</span><span class="o">&amp;</span><span class="p">]</span><span class="o">/</span><span class="n">g</span><span class="err">&#39;</span>      <span class="err">结果为</span><span class="p">[</span><span class="n">an</span><span class="p">]</span> <span class="p">[</span><span class="n">example</span><span class="p">],</span> <span class="o">/</span><span class="n">w</span><span class="o">/</span><span class="err">表示每一个词，把它取代为</span><span class="p">[</span><span class="o">&amp;</span><span class="p">],</span><span class="o">&amp;</span><span class="err">代表之前的每一个匹配</span>
</pre></div>


<h1 id="5-awk-command">5 awk command</h1>
<div class="hlcode"><pre><span class="err">$</span><span class="mi">0</span> <span class="err">表示整条记录</span>
<span class="n">NR</span> <span class="err">表示每条记录的记录号</span>
<span class="n">NF</span> <span class="err">表示多少个字段，即多少列</span>
<span class="err">$</span><span class="n">NF</span>   <span class="err">表示最后一列</span>
</pre></div>


<h3 id="awk-nr-5-first-four-lines">awk 'NR &lt; 5' # first four lines</h3>
<div class="hlcode"><pre><span class="n">awk</span> <span class="err">&#39;</span><span class="n">NR</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span><span class="n">NR</span><span class="o">==</span><span class="mi">4</span><span class="err">&#39;</span> <span class="err">#</span><span class="n">First</span> <span class="n">four</span> <span class="n">lines</span>
<span class="n">awk</span> <span class="err">&#39;</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="err">&#39;</span> <span class="err">#</span> <span class="n">Lines</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">pattern</span> <span class="n">linux</span> <span class="p">(</span><span class="n">we</span> <span class="n">can</span> <span class="n">specify</span> <span class="n">regex</span><span class="p">)</span>
<span class="n">awk</span> <span class="err">&#39;</span><span class="o">!/</span><span class="n">linux</span><span class="o">/</span><span class="err">&#39;</span> <span class="err">#</span> <span class="n">Lines</span> <span class="n">not</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">pattern</span> <span class="n">linux</span>
</pre></div>


<h1 id="6-summary">6 summary</h1>
<div class="hlcode"><pre><span class="o">--</span><span class="n">Parsing</span> <span class="n">email</span> <span class="n">address</span><span class="o">:</span>
<span class="n">egrep</span> <span class="o">-</span><span class="n">o</span> <span class="err">&#39;</span><span class="p">[</span><span class="n">A</span><span class="o">-</span><span class="n">Za</span><span class="o">-</span><span class="n">z0</span><span class="o">-</span><span class="mf">9.</span><span class="n">_</span><span class="p">]</span><span class="o">+</span><span class="err">@</span><span class="p">[</span><span class="n">A</span><span class="o">-</span><span class="n">Za</span><span class="o">-</span><span class="n">z0</span><span class="o">-</span><span class="mf">9.</span><span class="p">]</span><span class="o">+</span><span class="err">\</span><span class="p">.[</span><span class="n">a</span><span class="o">-</span><span class="n">zA</span><span class="o">-</span><span class="n">Z</span><span class="p">]{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span><span class="err">&#39;</span> <span class="n">file</span>

<span class="o">--</span><span class="n">Finding</span> <span class="n">largest</span> <span class="n">size</span> <span class="n">files</span>
<span class="n">du</span> <span class="o">-</span><span class="n">ak</span> <span class="p">.</span><span class="o">/</span> <span class="o">|</span> <span class="n">sort</span> <span class="o">-</span><span class="n">nrk</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">head</span>
<span class="n">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">exec</span> <span class="n">du</span> <span class="o">-</span><span class="n">k</span> <span class="p">{}</span> <span class="err">\</span><span class="p">;</span> <span class="o">|</span> <span class="n">sort</span> <span class="o">-</span><span class="n">nrk</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">head</span>
</pre></div>


<h1 id="delete-duplicate-lines">Delete duplicate lines</h1>
<div class="hlcode"><pre><span class="mf">1.</span> <span class="n">sort</span> <span class="o">-</span><span class="n">n</span> <span class="err">$</span><span class="n">file</span> <span class="o">|</span> <span class="n">awk</span> <span class="err">&#39;</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="err">$</span><span class="mi">0</span><span class="o">!=</span><span class="n">line</span><span class="p">)</span><span class="n">print</span><span class="p">;</span> <span class="n">line</span><span class="o">=</span><span class="err">$</span><span class="mi">0</span><span class="p">}</span><span class="err">&#39;</span>
<span class="mf">2.</span> <span class="n">sort</span> <span class="o">-</span><span class="n">n</span> <span class="n">test</span><span class="p">.</span><span class="n">txt</span> <span class="o">|</span> <span class="n">uniq</span>
</pre></div>


<h1 id="replace-tab-to-other">Replace tab to other</h1>
<div class="hlcode"><pre><span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">t</span><span class="o">/</span><span class="p">.</span><span class="o">/</span><span class="n">g</span><span class="err">&#39;</span> <span class="n">file</span>  <span class="err">#</span><span class="n">replace</span> <span class="n">the</span> <span class="n">tab</span> <span class="n">to</span> <span class="sc">&#39;.&#39;</span>
</pre></div>


<ul>
<li>批量替换当前目录所有文件，将YES修改为NO</li>
</ul>
<div class="hlcode"><pre><span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s">&quot;s/YES/NO/g&quot;</span> <span class="err">`</span><span class="n">grep</span> <span class="s">&quot;YES&quot;</span> <span class="o">-</span><span class="n">rl</span> <span class="o">*</span><span class="err">`</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s">&quot;s/nil/null/g&quot;</span> <span class="err">`</span><span class="n">grep</span> <span class="s">&quot;nil&quot;</span> <span class="o">-</span><span class="n">rl</span> <span class="o">*</span><span class="err">`</span>
</pre></div>


<h2 id="finding-dotfile">Finding dotfile</h2>
<div class="hlcode"><pre><span class="n">du</span> <span class="o">-</span><span class="n">sh</span> <span class="o">*</span> <span class="p">.[</span><span class="o">^</span><span class="p">.]</span><span class="o">*</span>
</pre></div>


<h2 id="bash-cut-usages">bash cut usages</h2>
<h3 id="select-column-of-characters">select column of characters</h3>
<p>Below example will show the first characters of /etc/passwd file, you can replace the number one to other numbers, it means which characters</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<h3 id="select-column-of-characters-using-range">select column of characters using Range</h3>
<p>Below example will print the first 9 characters of /etc/passwd.</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span><span class="mi">9</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<p>Below example will print from the third charater to end of file /etc/passwd</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">c3</span><span class="o">-</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<p>Below example will print from first charater to 10th character of file /etc/passwd</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="mi">10</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<h3 id="select-a-specific-field-from-a-file">select a specific field from a file</h3>
<p>This usage somewhat like awk, we can compare with these two commands<br />
Print filed one of file /etc/passwd, the delimiter is ":"</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;:&quot;</span> <span class="o">-</span><span class="n">f1</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
<span class="n">awk</span> <span class="o">-</span><span class="n">F</span><span class="o">:</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">print</span> <span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">}</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<h3 id="select-multiple-fields-from-a-file">select multiple fields from a file</h3>
<p>Print field 1,3 and 5; print from filed 1 to 3 plus 5.</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;:&quot;</span> <span class="o">-</span><span class="n">f1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span> <span class="err">#</span><span class="n">awk</span> <span class="o">-</span><span class="n">F</span><span class="o">:</span> <span class="err">&#39;</span><span class="p">{</span><span class="n">print</span> <span class="err">$</span><span class="mi">1</span><span class="p">,</span> <span class="err">$</span><span class="mi">3</span><span class="p">,</span> <span class="err">$</span><span class="mi">5</span><span class="p">}</span><span class="err">&#39;</span>
<span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;:&quot;</span> <span class="o">-</span><span class="n">f1</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<h3 id="select-fields-only-when-a-line-contains-the-delimiter">Select Fields Only When a Line Contains the Delimiter</h3>
<p>In our /etc/passwd example, if you pass a different delimiter other than : (colon), cut will just display the whole line.<br />
In the following example, we’ve specified the delimiter as | (pipe), and cut command simply displays the whole line, even when it doesn’t find any line that has | (pipe) as delimiter.</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;|&quot;</span> <span class="o">-</span><span class="n">f1</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<p>But, it is possible to filter and display only the lines that contains the specified delimiter using -s option.<br />
The following example doesn’t display any output, as the cut command didn’t find any lines that has | (pipe) as delimiter in the /etc/passwd file.</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;|&quot;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">f1</span>
</pre></div>


<h3 id="select-all-fields-except-the-specified-field">select all fields except the specified field</h3>
<p>Print all the fields except field one</p>
<div class="hlcode"><pre><span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;:&quot;</span> <span class="o">--</span><span class="n">complement</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">f1</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span>
</pre></div>


<h3 id="change-output-delimiter-for-display">change output delimiter for display</h3>
<div class="hlcode"><pre><span class="n">grep</span> <span class="s">&quot;/bin/bash&quot;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span><span class="o">|</span><span class="n">cut</span> <span class="o">-</span><span class="n">d</span><span class="s">&quot;:&quot;</span> <span class="o">-</span><span class="n">s</span> <span class="o">-</span><span class="n">f1</span><span class="o">-</span><span class="mi">3</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="n">delimiter</span><span class="o">=</span><span class="sc">&#39;*&#39;</span>
</pre></div>


<h2 id="remove-the-m-character-from-linuxunix">Remove the ^M character from Linux/UNIX</h2>
<div class="hlcode"><pre><span class="nl">https:</span><span class="c1">//www.cyberciti.biz/faq/sed-remove-m-and-line-feeds-under-unix-linux-bsd-appleosx/</span>
<span class="n">cat</span> <span class="o">-</span><span class="n">v</span> <span class="n">file_name</span> <span class="n">will</span> <span class="n">show</span> <span class="n">the</span> <span class="o">^</span><span class="n">M</span> <span class="n">character</span> <span class="n">in</span> <span class="n">the</span> <span class="n">unix</span><span class="o">/</span><span class="n">linux</span>
</pre></div>


<h3 id="linux-platform">Linux Platform</h3>
<div class="hlcode"><pre><span class="n">dos2unix</span> <span class="n">file_name</span>
</pre></div>


<h3 id="unix">Unix</h3>
<div class="hlcode"><pre><span class="n">To</span> <span class="n">remove</span> <span class="n">the</span> <span class="o">^</span><span class="n">M</span> <span class="n">characters</span> <span class="n">at</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">all</span> <span class="n">lines</span> <span class="n">in</span> <span class="n">vi</span><span class="p">,</span> <span class="n">use</span><span class="o">:</span>
<span class="o">:%</span><span class="n">s</span><span class="o">/^</span><span class="n">V</span><span class="o">^</span><span class="n">M</span><span class="c1">//g</span>
<span class="n">The</span> <span class="o">^</span><span class="n">v</span> <span class="n">is</span> <span class="n">a</span> <span class="n">CONTROL</span><span class="o">-</span><span class="n">V</span> <span class="n">character</span> <span class="n">and</span> <span class="o">^</span><span class="n">m</span> <span class="n">is</span> <span class="n">a</span> <span class="n">CONTROL</span><span class="o">-</span><span class="n">M</span><span class="p">.</span> <span class="n">When</span> <span class="n">you</span> <span class="n">type</span> <span class="n">this</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">look</span> <span class="n">like</span> <span class="n">this</span><span class="o">:</span>
<span class="o">:%</span><span class="n">s</span><span class="o">/^</span><span class="n">M</span><span class="c1">//g</span>

<span class="n">OR</span> <span class="n">easy</span> <span class="n">to</span> <span class="n">use</span> <span class="n">sed</span> <span class="n">syntax</span> <span class="n">to</span> <span class="n">remove</span> <span class="n">carriage</span> <span class="k">return</span> <span class="n">in</span> <span class="n">Unix</span> <span class="n">or</span> <span class="n">Linux</span><span class="o">:</span>
<span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">r</span><span class="err">$</span><span class="c1">//&#39; input &gt; output</span>
<span class="n">sed</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">r</span><span class="err">$</span><span class="c1">//g&#39; input &gt; output</span>
<span class="cp"># GNU/sed syntax</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="err">&#39;</span><span class="n">s</span><span class="o">/</span><span class="err">\</span><span class="n">r</span><span class="err">$</span><span class="c1">//g&#39; input</span>
</pre></div>


<h3 id="the-ksh-script-to-remove-the-m-on-aix">the ksh script to remove the ^M on AIX</h3>
<div class="hlcode"><pre><span class="c">#!/bin/ksh</span>
<span class="k">for </span>file in <span class="k">$(</span>find /home/db2prod/sprint201604/ -type f<span class="k">)</span>; <span class="k">do</span>
tr -d <span class="s1">&#39;\r&#39;</span> &lt;<span class="nv">$file</span>&gt;temp.<span class="nv">$$</span> <span class="o">&amp;&amp;</span> mv temp.<span class="nv">$$</span> <span class="nv">$file</span>
<span class="k">done</span>
</pre></div>


<h2 id="meaning-of-ps1-ps2-ps3-and-ps4">Meaning of PS1, PS2, PS3 and PS4</h2>
<h3 id="ps1-the-default-command-line-prompt">PS1 -- The default command line prompt</h3>
<div class="hlcode"><pre><span class="n">export</span> <span class="n">PS1</span><span class="o">=</span><span class="s">&quot;$USERNAME@$HOSTNAME: $PWD &gt;&quot;</span>
<span class="n">kingsley</span><span class="err">@</span><span class="n">oc7421025535</span><span class="p">.</span><span class="n">ibm</span><span class="p">.</span><span class="n">com</span><span class="o">:</span> <span class="o">/</span><span class="n">worktmp</span><span class="o">/</span><span class="n">note</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">practice</span> <span class="o">&gt;</span>
</pre></div>


<h3 id="ps2-continuation-interactive-prompt">PS2 -- Continuation interactive prompt</h3>
<div class="hlcode"><pre><span class="n">export</span> <span class="n">PS2</span><span class="o">=</span><span class="s">&quot;==&gt; &quot;</span>
<span class="n">echo</span> <span class="s">&quot;Hello, \</span>
<span class="s">==&gt; Wolrd&quot;</span>
</pre></div>


<h3 id="ps3-prompt-used-by-select-inside-the-shell-script">PS3 --  prompt used by "select" inside the shell script</h3>
<div class="hlcode"><pre><span class="n">PS3</span><span class="o">=</span><span class="s">&quot;Select an option and press Enter:&quot;</span>
<span class="n">select</span> <span class="n">i</span> <span class="n">in</span> <span class="n">OS</span> <span class="n">Host</span> <span class="n">Filesystems</span> <span class="n">Date</span> <span class="n">Users</span> <span class="n">Quit</span>
<span class="p">...</span>
</pre></div>


<p>Will show: <code>Select an option and press Enter:</code> on the select menu.</p>
<h3 id="ps4-used-by-set-x-to-prefix-tracing-output">PS4 --   Used by "set -x " to prefix tracing output</h3>
<p>Default PS4 is "++"</p>
<h3 id="prompt_command">PROMPT_COMMAND</h3>
<p>[kingsley@: /home/kingsley]$ export PROMPT_COMMAND="echo -n [$(date +%k:%m:%S)]"<br />
[20:08:59][kingsley@: /home/kingsley]$ echo "hello"<br />
hello<br />
[20:08:59][kingsley@: /home/kingsley]$ </p>
<h2 id="special-dolar-in-linux">special dolar($) in linux</h2>
<ul>
<li>$n, n is a positive integer number. stands for the position of the parameters</li>
<li>$0, the script name</li>
<li>$@, all positional parameters</li>
<li>$*, all positional parameters</li>
<li>$#, the number of the positional parameters</li>
<li>$-, current options set for the shell</li>
<li>$$, pid of the current shell</li>
<li>$_, most recent parameter</li>
<li>$?, the return status of a command</li>
<li>$!, the PID of the most recent background command<br />
    $ sleep 25&amp;<br />
    [1] 6237<br />
    $ echo $!<br />
    6237</li>
</ul>
<h3 id="the-difference-between-and">The difference between $@ and $*</h3>
<div class="hlcode"><pre><span class="nv">$ </span><span class="nb">set</span> <span class="s1">&#39;apple pie&#39;</span> pears peaches
<span class="nv">$ </span><span class="k">for </span>i in <span class="nv">$*</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done</span>
apple
pie
pears
peaches

<span class="nv">$ </span><span class="nb">set</span> <span class="s1">&#39;apple pie&#39;</span> pears peaches
<span class="nv">$ </span><span class="k">for </span>i in <span class="nv">$@</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done</span>
apple
pie
pears
peaches

<span class="nv">$ </span><span class="k">for </span>i in <span class="s2">&quot;$*&quot;</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done</span>
apple pie pears peaches

<span class="nv">$ </span><span class="k">for </span>i in <span class="s2">&quot;$@&quot;</span>; <span class="k">do </span><span class="nb">echo</span> <span class="nv">$i</span>; <span class="k">done</span>
apple pie
pears
peaches
</pre></div>


<h3 id="set-command-in-shell-script">set command in shell script</h3>
<p>The <code>set</code> command will reset or unset all of the positional parameters, for example, I have a script named <code>args.sh</code> contains following content</p>
<div class="hlcode"><pre><span class="n">echo</span> <span class="s">&quot;The name of the script is: $0&quot;</span>
<span class="n">echo</span> <span class="s">&quot;all of the parameters are: $*&quot;</span>
<span class="n">set</span> <span class="n">Mike</span> <span class="n">Jordan</span> <span class="n">Jake</span>
<span class="n">echo</span> <span class="s">&quot;All of the parameter are: $*&quot;</span>
</pre></div>


<p>when the <code>args.sh</code> executed like <code>./args.sh a b c d</code>, the first "$<em>" will show "a b c d", but the second "$</em>" will change to "Mike Jordan Jake"</p>
<h2 id="how-to-check-for-null-value">How to check for null value</h2>
<div class="hlcode"><pre><span class="k">if</span> <span class="p">[</span> <span class="s">&quot;$name&quot;</span> <span class="o">==</span> <span class="s">&quot;&quot;</span> <span class="p">];</span> <span class="err">#</span> <span class="n">the</span> <span class="n">same</span> <span class="n">as</span> <span class="p">[</span> <span class="o">!</span> <span class="s">&quot;$name&quot;</span> <span class="p">]</span> <span class="n">or</span> <span class="p">[</span> <span class="o">-</span><span class="n">z</span> <span class="s">&quot;$name&quot;</span> <span class="p">]</span>
   <span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s">&quot;\$name is null&quot;</span>
<span class="n">fi</span>
<span class="n">orausr</span><span class="o">=</span><span class="err">`</span><span class="n">grep</span> <span class="o">-</span><span class="n">w</span> <span class="s">&quot;oracle&quot;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">passwd</span><span class="o">|</span><span class="n">awk</span> <span class="o">-</span><span class="n">F</span><span class="o">:</span> <span class="err">&#39;</span><span class="p">{</span> <span class="n">print</span> <span class="err">$</span><span class="mi">1</span> <span class="p">}</span><span class="err">&#39;`</span>
<span class="k">if</span> <span class="p">[</span> <span class="s">&quot;X$orausr&quot;</span> <span class="o">!=</span> <span class="s">&quot;X&quot;</span> <span class="p">];</span> <span class="n">then</span>
   <span class="n">echo</span> <span class="s">&quot;oracle user exist...&quot;</span>
<span class="k">else</span>
   <span class="n">echo</span> <span class="s">&quot;oracle user does not exist...&quot;</span>
<span class="n">fi</span>
</pre></div>


<h2 id="testing-standard-error-messages-stderr">testing standard error messages STDERR</h2>
<div class="hlcode"><pre><span class="n">echo</span> <span class="s">&quot;This is an error message...&quot;</span> <span class="o">&gt;&amp;</span><span class="mi">2</span>
<span class="n">echo</span> <span class="s">&quot;This is normal output...&quot;</span>
<span class="cp"># usage:</span>
<span class="cp"># ./file_descriptor will display all the lines</span>
<span class="cp"># ./file_descriptor 2&gt;erro.out will display normal output to screen,</span>
<span class="cp"># the error message will be saved to erro.out file.</span>

<span class="cp"># below example will redirect the normal output to file1</span>
<span class="cp"># and the error output to file2</span>
<span class="cp"># ls -latr file_descriptor.ksh tttttttt 2&gt;file2 1&gt;file1</span>

<span class="cp"># silent execution of script</span>
<span class="cp"># ./file_descriptor.ksh &gt;/Dev/null 2&gt;&amp;1</span>

<span class="mi">1</span><span class="o">&gt;&amp;</span><span class="mi">2</span>  <span class="err">#</span><span class="n">redirect</span> <span class="n">output</span> <span class="n">to</span> <span class="n">where</span> <span class="n">error</span> <span class="n">is</span> <span class="n">going</span>
<span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>  <span class="err">#</span><span class="n">redirect</span> <span class="n">error</span> <span class="n">to</span> <span class="n">where</span> <span class="n">output</span> <span class="n">is</span> <span class="n">going</span>
</pre></div>


<h2 id="remote-display-setting-on-linux-client-and-servervnc">Remote display setting on Linux Client and Server(VNC)</h2>
<ul>
<li>
<ol>
<li>On server side, such as my vm 192.168.56.56<br />
Modify <code>X11Forwarding yes</code> to <code>X11Forwarding no</code> on <strong><em>/etc/ssh/sshd_config</em></strong>, it's <strong><em>/etc/ssh/sshd_config</em></strong>, not <strong><em>ssh_config</em></strong></li>
</ol>
</li>
</ul>
<div class="hlcode"><pre><span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="err">&#39;</span><span class="o">/^</span><span class="n">X11Forwarding</span><span class="o">/</span><span class="n">s</span><span class="o">/</span><span class="n">yes</span><span class="o">/</span><span class="n">no</span><span class="o">/</span><span class="n">g</span><span class="err">&#39;</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ssh</span><span class="o">/</span><span class="n">sshd_config</span>
</pre></div>


<ul>
<li>
<ol>
<li>On ssh client, such as my laptop 192.168.56.1<br />
Change the option of <code>ForwardX11</code> to <code>ForwardX11 yes</code> on <strong><em>/etc/ssh/ssh_config</em></strong>, not <strong><em>sshd_config</em></strong></li>
</ol>
</li>
</ul>
<p>After that, when ssh to server end, the server end will auto setting DISPLAY to localhost:10.0</p>
<ul>
<li>
<ol>
<li>On Server end, modify below on <code>/etc/X11/xinit/xserverrc</code></li>
</ol>
</li>
</ul>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">X11</span><span class="o">/</span><span class="n">xinit</span><span class="o">/</span><span class="n">xserverrc</span>
<span class="cp">#!/bin/sh</span>
<span class="n">exec</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">X11</span><span class="o">/</span><span class="n">X</span> <span class="o">-</span><span class="n">dpi</span> <span class="mi">100</span>
</pre></div>


<h2 id="investigating-high-cpu-on-linux">Investigating high CPU on Linux</h2>
<p><code>ps -eo pid,user,pcpu,command --sort=-pcpu</code></p>
  
</div>
    </div>
    <div id="footer">
      <!-- <div class="footer-left"> -->
      <!-- <div class="footer-center"> -->
        <center>
        <p>
        Copyright © 2012-2018 Fung Kong.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://github.com/tankywoo/yasimple_x2" target="_blank">YASimple_X2</a>.
        </p>
        </center>
      <!-- </div> [> end footer-left <] -->
      <!-- <div class="footer-right"> -->
        <!-- <p>站点最后生成 2018-01-31 17:22:28</p> -->
      <!-- </div> [> end footer-right <] -->
    </div>

    
    

  </body>
</html>